(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{1887:function(e,t,n){e.exports=n.p+"./fonts/SourceSerifPro-Black.ttf"},1888:function(e,t,n){e.exports=n.p+"./fonts/SourceSerifPro-Bold.ttf"},409:function(e,t,n){"use strict";n.d(t,"a",(function(){return Yt}));var r={};n.r(r),n.d(r,"screen",(function(){return R})),n.d(r,"modal",(function(){return I})),n.d(r,"defaultView",(function(){return V})),n.d(r,"container",(function(){return B})),n.d(r,"view",(function(){return A})),n.d(r,"iconColor",(function(){return N})),n.d(r,"text",(function(){return z})),n.d(r,"helperText",(function(){return U})),n.d(r,"themedSwitch",(function(){return W})),n.d(r,"textInput",(function(){return F})),n.d(r,"placeHolderText",(function(){return G})),n.d(r,"materialIcons",(function(){return H})),n.d(r,"button",(function(){return J})),n.d(r,"buttonDisabled",(function(){return K})),n.d(r,"picker",(function(){return q})),n.d(r,"pickerDisabled",(function(){return Z})),n.d(r,"tabNavigator",(function(){return Y}));var a={};n.r(a),n.d(a,"view",(function(){return X})),n.d(a,"themedSwitch",(function(){return Q})),n.d(a,"displayError",(function(){return _})),n.d(a,"materialIcons",(function(){return ee})),n.d(a,"modal",(function(){return te})),n.d(a,"auth",(function(){return ne})),n.d(a,"views",(function(){return re})),n.d(a,"button",(function(){return ae})),n.d(a,"container",(function(){return oe})),n.d(a,"infiniteScroll",(function(){return ce})),n.d(a,"textInput",(function(){return le})),n.d(a,"picker",(function(){return ie})),n.d(a,"logoutModal",(function(){return ue})),n.d(a,"messenger",(function(){return se}));var o={};n.r(o),n.d(o,"playgroundMode",(function(){return fe})),n.d(o,"defaultTheme",(function(){return de}));var c=n(14),l=n.n(c),i=(n(353),n(0)),u=n.n(i),s=n(160),f=n(1902),d=n(1906),m=n(16),g=n.n(m),h=n(52),b=n(87),p=(n(463),n(464),n(361)),v=n(95);b.apps.length||b.initializeApp({apiKey:"AIzaSyBHpKV6SSJImZK1vJPGiJwKnogLBMkgfro",authDomain:"cloud-lightning.firebaseapp.com",databaseURL:"https://cloud-lightning.firebaseio.com",projectId:"cloud-lightning",storageBucket:"cloud-lightning.appspot.com",messagingSenderId:"357266467361",appId:"1:357266467361:web:627d7e1b7817256cfbd160",measurementId:"G-CFXNQMD10X"});var E=function(){return b.firestore()},y=b.auth,O=b.functions,w=(b.firestore,b.auth.GoogleAuthProvider),C=function(){return y().currentUser},x=function(){return p.a(y())},S=function(e){return E().collection(e)},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?v.a(S(e),{snapshotListenOptions:{includeMetadataChanges:t}}):[void 0,!1,new Error("useCollection: collectionPath not specified")]},P=function(e,t){return O().httpsCallable(e)(t)},k=Object(i.createContext)(),T=function(e){var t=e.children,n=x(),r=l()(n,3),a=r[0],o=r[1],c=r[2],s=Object(i.useState)({}),f=l()(s,2),d=f[0],m=f[1],b=Object(i.useState)(!0),p=l()(b,2),v=p[0],E=p[1],y=Object(i.useState)(),O=l()(y,2),w=O[0],C=O[1];Object(i.useEffect)((function(){!function(e){var t,n;g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=3;break}return C(void 0),e.abrupt("return");case 3:return e.next=5,g.a.awrap(a.getIdToken(!0));case 5:return t=e.sent,C(t),e.next=9,g.a.awrap(a.getIdTokenResult());case 9:void 0!==(n=e.sent).claims&&m(n.claims),E(!1);case 12:case"end":return e.stop()}}),null,null,null,Promise)}()}),[a]);var S=o||v,j=c;return o?u.a.createElement(h.a,null):c?u.a.createElement(DisplayError,{permissionDenied:"permission-denied"===c}):u.a.createElement(k.Provider,{value:{currentUser:a,claims:d,isLoading:S,error:j,addClaim:function(e,t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(P("modifyClaim",{userId:e,authToken:w,claim:t,value:!0}));case 2:return n=r.sent,r.abrupt("return",n.data);case 4:case"end":return r.stop()}}),null,null,null,Promise)},removeClaim:function(e,t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(P("modifyClaim",{userId:e,authToken:w,claim:t}));case 2:return n=r.sent,r.abrupt("return",n.data);case 4:case"end":return r.stop()}}),null,null,null,Promise)},getClaims:function(e){var t;return g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.a.awrap(P("getClaims",{userId:e,authToken:w}));case 2:return t=n.sent,n.abrupt("return",t.data.customClaims);case 4:case"end":return n.stop()}}),null,null,null,Promise)},userToken:w}},t)},D=n(26),M=n(141),L=n(272),R={Light:{backgroundColor:"#ccc",borderBottomColor:"#333"},Dark:{backgroundColor:"#333",borderBottomColor:"#eee"}},I={Light:{backgroundColor:"#ddd",borderColor:"#333"},Dark:{backgroundColor:"#246",borderColor:"#eee"}},V={Light:{borderColor:"black"},Dark:{borderColor:"white"}},B={Light:{backgroundColor:"#ddd",borderColor:"black"},Dark:{backgroundColor:"#212121",borderColor:"#aaa"}},A={Light:{borderColor:"black"},Dark:{borderColor:"white"}},N={Light:{color:"#555"},Dark:{color:"red"}},z={Light:{color:"#000"},Dark:{color:"#eee"}},U={Light:{color:"#400"},Dark:{color:"#D00"}},W={Light:{trackColorOn:"#81b0ff",trackColorOff:"#767577",thumbColorOn:"#ddd",thumbColorOff:"#f4f3f4",iosBackgroundColor:"#3e3e3e"},Dark:{trackColorOn:"#22b0ff",trackColorOff:"#767577",thumbColorOn:"#fff",thumbColorOff:"#f4f3f4",iosBackgroundColor:"#3e3e3e"}},F={Light:{color:"#212121",backgroundColor:"#eee"},Dark:{color:"#eee",backgroundColor:"#333"}},G={Light:{color:"#aaa"},Dark:{color:"#888"}},H={Light:{color:"#212121"},Dark:{color:"#aaaaaa"}},J={Light:{color:"white",backgroundColor:"#999"},Dark:{color:"#eee",backgroundColor:"#899eec"}},K={Light:{color:"#aaa",backgroundColor:"#444"},Dark:{color:"#999",backgroundColor:"#777"}},q={Light:{color:"#888",backgroundColor:"#eee"},Dark:{color:"#eee",backgroundColor:"#222"}},Z={Light:{color:"#444",backgroundColor:"#aaa"},Dark:{color:"#999",backgroundColor:"#777"}},Y={Light:{activeTintColor:"#246",inactiveTintColor:"#468",activeBackgroundColor:"#ddd",inactiveBackgroundColor:"#bbb"},Dark:{activeTintColor:"#eee",inactiveTintColor:"gray",activeBackgroundColor:"#555",inactiveBackgroundColor:"#444"}},$=n(2),X=$.a.create({default:{}}),Q=$.a.create({default:{}}),_=$.a.create({header:{paddingTop:5,fontSize:18,fontWeight:"600"},text:{paddingTop:5,paddingLeft:10,fontSize:14,fontWeight:"600"}}),ee=$.a.create({icons:{paddingHorizontal:3}}),te=$.a.create({content:{width:350}}),ne=$.a.create({logo:{flex:1,height:180,width:180,alignSelf:"center",margin:30},footerView:{flex:1,alignSelf:"center",alignItems:"center",justifyContent:"center",marginTop:20}}),re=$.a.create({screen:{flex:1,paddingBottom:2},activityIndicator:{flex:1,justifyContent:"center",alignContent:"center",alignItems:"center"},scrollView:{flex:1},flexRowJustifyCenter:{flexDirection:"row",justifyContent:"center"},filletedBorderView:{flex:1,margin:0,padding:5,borderWidth:1,borderRadius:5,width:"100%"},flatList:{}}),ae=$.a.create({native:{},touchable:{borderRadius:5,paddingVertical:5,paddingHorizontal:10,alignItems:"center"},text:{fontWeight:"600"}}),oe=$.a.create({container:{flex:1,borderRadius:5},scrollView:{width:"100%"}}),ce=$.a.create({view:{flex:1,margin:5,padding:5,borderWidth:1,borderRadius:5,width:"100%"}}),le=$.a.create({input:{height:32,borderRadius:5,overflow:"hidden",marginTop:5,marginHorizontal:5,paddingLeft:10}}),ie=$.a.create({toggleBox:{backgroundColor:"#ddd",borderColor:"rgb(178,181,189)",borderBottomWidth:1},picker:{margin:5,backgroundColor:"#fff",paddingHorizontal:2},item:{}}),ue=$.a.create({text:{fontSize:16,fontWeight:"600",marginBottom:10},buttonView:{flexDirection:"row",alignItems:"center"},button:{marginTop:5,marginHorizontal:10}}),se=$.a.create({viewChat:{flex:1,margin:5,padding:5,borderWidth:1,borderRadius:5,width:"100%"},views:{flexDirection:"row",width:"100%",borderWidth:1,borderRadius:5,borderBottomWidth:0,borderTopWidth:0},flatList:{},textInput:{flex:5,height:35,marginLeft:5,marginVertical:5},sendButton:{flex:1,marginRight:5,marginVertical:5,height:35}}),fe=!1,de="Light",me=Object(i.createContext)(),ge=function(e){var t=e.children,n=Object(i.useState)(o.defaultTheme),r=l()(n,2),a=r[0],c=r[1],s=Object(i.useState)(D.a.UNKNOWN),f=l()(s,2),d=f[0],m=f[1];return Object(L.a)((function(){M.f().catch((function(e){return console.warn(e)})),M.b().then((function(e){m(e),M.d(e).catch((function(e){return console.warn(e)}))})).catch((function(e){return console.warn(e)})),M.a((function(e){return m(e.orientationInfo.orientation)}))})),Object(L.b)((function(){return M.e()})),u.a.createElement(me.Provider,{value:{theme:a,setTheme:c,screenOrientation:d}},t)},he=(n(465),n(1904)),be=n(355),pe=n(348),ve=n(126),Ee=n(35),ye=n(6),Oe=n(8),we=n.n(Oe),Ce=n(7),xe=n.n(Ce),Se=n(25),je=function(e){var t=e.children,n=e.style,a=e.classRef,o=e.fontWeight,c=e.fontSize,l=xe()(e,["children","style","classRef","fontWeight","fontSize"]),s=Object(i.useContext)(me).theme;return o||(o="200"),c||(c=14),u.a.createElement(Se.a,we()({},l,{ref:a,style:[r.text[s],{fontWeight:o,fontSize:c},n],selectable:!1}),t)},Pe=n(4),ke=n(112),Te=function(e){var t=e.children,n=e.style,o=e.isSafe,c=Object(i.useContext)(me).theme;return o?u.a.createElement(ke.a,{style:[a.container.container,r.container[c],n]},t):u.a.createElement(Pe.a,{style:[a.container.container,r.container[c],n]},t)},De=n(46),Me=function(e){var t=e.children,n=e.style,o=e.classRef,c=xe()(e,["children","style","classRef"]),l=Object(i.useContext)(me).theme;return u.a.createElement(De.a,we()({autoCompleteType:"off",autoComplete:!1,autoCapitalize:"none",autoCorrect:!1,underlineColorAndroid:"transparent"},c,{ref:o,style:[a.textInput.input,r.textInput[l],n],placeholderTextColor:r.placeHolderText[l].color}),t)},Le=n(177),Re=n(29),Ie=function(e){var t=e.style,n=e.title,o=e.disabled,c=e.reactNativeButton,l=xe()(e,["style","title","disabled","reactNativeButton"]),s=Object(i.useContext)(me).theme,f=o?r.buttonDisabled[s]:r.button[s];return c?u.a.createElement(Le.a,we()({title:n,disabled:o,style:[a.button.native,f,t]},l)):u.a.createElement(Re.a,we()({disabled:o,style:[a.button.touchable,f,t]},l),u.a.createElement(je,{style:[f,a.button.text]},n))},Ve=n(410),Be=function(e){var t=e.navigation,n=e.title,a=e.photoURL,o=e.hasDrawerNavigation,c=void 0===o||o,s=e.hasHome,f=e.hasBack,d=e.hasLogout,m=void 0===d||d,g=Object(i.useContext)(me),h=g.theme,b=g.setTheme,p=Object(i.useState)(!1),v=l()(p,2),E=v[0],y=v[1],O=function(){b("Dark"===h?"Light":"Dark")};return u.a.createElement(u.a.Fragment,null,u.a.createElement(rt,{shown:E,navigation:t,dismiss:function(){return y(!1)}}),u.a.createElement(Ve.a,{containerStyle:{width:"100%",borderBottomColor:r.screen[h].borderBottomColor},backgroundColor:"none",backgroundImageStyle:{},centerComponent:function(){return u.a.createElement(je,{fontWeight:"600",fontSize:20},n)},leftComponent:function(){return u.a.createElement(Pe.a,{style:{flexDirection:"row"}},c?u.a.createElement(Qe,{name:"menu",size:28,onPress:t.openDrawer}):u.a.createElement(u.a.Fragment,null),s?u.a.createElement(Qe,{name:"home",size:28,onPress:function(){return t.popToTop()}}):u.a.createElement(u.a.Fragment,null),f?u.a.createElement(Qe,{name:"navigate-before",size:28,onPress:function(){return t.pop()}}):u.a.createElement(u.a.Fragment,null))},leftContainerStyle:{},placement:"center",rightComponent:function(){return u.a.createElement(Pe.a,{style:{flexDirection:"row"}},u.a.createElement(Qe,{name:"settings-brightness",size:28,onPress:O}),m?a?u.a.createElement(nt,{source:{uri:a},style:{width:28,height:28,borderRadius:"50%"},onPress:function(){return y(!0)}}):u.a.createElement(Qe,{name:"face",size:28,onPress:function(){return y(!0)}}):u.a.createElement(u.a.Fragment,null))},rightContainerStyle:{},statusBarProps:{}}))},Ae=function(e){var t=e.children,n=e.style,o=e.navigation,c=xe()(e,["children","style","navigation"]),l=Object(i.useContext)(me).theme,s=Object(i.useContext)(k).currentUser;return u.a.createElement(Pe.a,{style:[a.views.screen,r.screen[l],n]},u.a.createElement(Be,we()({navigation:o,photoURL:s&&s.photoURL},c)),t)},Ne=function(e){var t=e.children,n=e.style,o=xe()(e,["children","style"]),c=Object(i.useContext)(me).theme;return u.a.createElement(Pe.a,we()({style:[a.view.default,r.view[c],n]},o),t)},ze=function(){return u.a.createElement(Ne,{style:a.views.activityIndicator},u.a.createElement(h.a,{size:"large"}))},Ue=function(e){var t=e.permissionDenied,n=e.error,r=n?n.message:void 0,o=t?"Permission Denied":r;return console.error(n),u.a.createElement(Te,{style:a.views.filletedBorderView},u.a.createElement(je,{style:a.displayError.header},"Sorry, an ",o?"error":"unknown error"," has occurred"),o&&u.a.createElement(je,{style:a.displayError.text},o))},We=n(63),Fe=function(e){var t=Object(i.useRef)(),n=e.style,o=e.messages,c=e.onScrollProp,s=void 0===c?C:c,f=e.onStartReached,d=e.autoScrollToEnd,m=xe()(e,["style","messages","onScrollProp","onStartReached","autoScrollToEnd"]),g=Object(i.useState)((function(e){return{}})),h=l()(g,2),b=h[0],p=h[1],v=Object(i.useState)(!1),E=l()(v,2),y=E[0],O=E[1],w=Object(i.useContext)(me).theme,C=function(e){var t=e.nativeEvent,n=t.contentOffset,r=t.contentSize,a=t.layoutMeasurement;Math.round(r.height-a.height),Math.round(r.width-a.width);0===n.y&&p({}),s&&s(e)};return u.a.useEffect((function(){"function"===typeof f&&f()}),[b]),u.a.createElement(Pe.a,{style:[a.views.filletedBorderView,r.defaultView[w],n]},u.a.createElement(We.a,we()({},m,{ref:t,removeClippedSubviews:!0,contentContainerStyle:a.views.flatList,data:o,onStartReached:function(){console.log("loadMoreMessages() : Start"),O(!0),messengerDispatch({type:"incrementViewLength",amount:25}),updateMessages()},onLayout:function(e){e.nativeEvent;d&&!y&&t.current.scrollToEnd({animated:!1})},onContentSizeChange:function(e,n){d&&!y&&t.current.scrollToEnd({animated:!1})},onScroll:C})))},Ge=function(e){var t=e.collectionPath,n=e.orderBy,r=(e.initialNumToRender,xe()(e,["collectionPath","orderBy","initialNumToRender"])),a=j(t),o=l()(a,3),c=o[0],s=o[1],f=o[2],d=Object(i.useState)([]),m=l()(d,2),g=m[0],h=m[1],b=Object(i.useState)(!0),p=l()(b,2),v=p[0],E=p[1],y=Object(i.useState)(!1),O=l()(y,2),w=O[0],C=O[1];if(Object(i.useEffect)((function(){s||f||!c||function(e,t,n,r){return t?n?r?e.query.orderBy(t).limitToLast(n).startAt(r).get():e.query.orderBy(t).limitToLast(n).get():e.query.orderBy(t).get():e.query.get()}(c,n).then((function(e){h(function(e){var t=[];return e.docs.forEach((function(e){var n=e.data();n.id=e.id,t.push(n)})),t}(e)),E(!1)})).catch((function(e){C(e)}))}),[c]),f||w){var x=f?f.code:null,S=w?w.code:null;return u.a.createElement(Ue,{permissionDenied:"permission-denied"===x||"permission-denied"===S,error:f||w})}return s||v?u.a.createElement(ze,null):u.a.createElement(Fe,we()({messages:g},r))},He=($.a.create({view:{flex:1,margin:5,padding:5,borderWidth:1,borderRadius:5,borderColor:"#48a",width:"100%"}}),n(1907),n(411)),Je=function(e){var t=e.children,n=e.style,o=(e.navigation,xe()(e,["children","style","navigation"])),c=Object(i.useContext)(me).theme;return u.a.createElement(He.a,we()({style:[a.views.scrollView,r.screen[c],n]},o),t)},Ke=function(e){var t=e.children,n=e.style,o=xe()(e,["children","style"]),c=Object(i.useContext)(me).theme;return u.a.createElement(s.Modal,o,u.a.createElement(s.ModalContent,{style:[a.modal.content,r.modal[c],n]},t))},qe=(n(1905),n(48)),Ze=n(279),Ye=n(412),$e=function(e){var t=e.style,n=e.data,o=void 0===n?[]:n,c=e.selectedIndex,s=void 0===c?0:c,f=e.onValueChanged,d=xe()(e,["style","data","selectedIndex","onValueChanged"]),m=Object(i.useContext)(me).theme,g=Object(i.useState)(),h=l()(g,2),b=h[0],p=h[1],v=Object(i.useState)(),E=l()(v,2),y=E[0],O=E[1];Object(i.useEffect)((function(){O(null==o?void 0:o[s])}),[o]),Object(i.useEffect)((function(){"function"===typeof f&&f(y)}),[y]);var w=function(){return u.a.createElement(Ze.a,we()({style:[a.picker.picker,r.picker[m],t]},d,{selectedValue:b,onValueChange:function(e,t){p(e),O(null==o?void 0:o[t])}}),o.map((function(e){return u.a.createElement(Ze.a.Item,{style:a.picker.item,label:(null==e?void 0:e.label)||e,value:null==e?void 0:e.value,key:(null==e?void 0:e.value)||e})})))};return u.a.createElement(qe.a,{bounces:!1},"ios"===ye.a.OS&&u.a.createElement(Ye.a,{label:y&&y.label?y.label:y||"",style:a.picker.toggleBox},u.a.createElement(w,null)),"ios"!==ye.a.OS&&u.a.createElement(w,null))},Xe=n(370),Qe=function(e){var t=e.style,n=xe()(e,["style"]),o=Object(i.useContext)(me).theme,c=r.materialIcons[o].color;return u.a.createElement(Xe.a,we()({style:[a.materialIcons.icons,t],color:c,selectable:!1},n))},_e=n(98),et=function(e){var t=e.children,n=e.style,o=e.value,c=e.onChange,l=e.classRef,s=xe()(e,["children","style","value","onChange","classRef"]),f=Object(i.useContext)(me).theme,d={false:r.themedSwitch[f].trackColorOff,true:r.themedSwitch[f].trackColorOn},m=o?r.themedSwitch[f].thumbColorOn:r.themedSwitch[f].thumbColorOff;return u.a.createElement(_e.a,we()({style:[a.themedSwitch.default,n]},s,{ref:l,trackColor:d,thumbColor:m,ios_backgroundColor:r.themedSwitch[f].iosBackgroundColor,onValueChange:c,value:o}),t)},tt=function(e){var t=e.label,n=e.viewStyle,r=e.textStyle,o=e.isLoading,c=xe()(e,["label","viewStyle","textStyle","isLoading"]);return u.a.createElement(Ne,{style:[a.views.flexRowJustifyCenter,n]},t&&u.a.createElement(je,{style:[{marginRight:10},r]},t),o?u.a.createElement(h.a,c):u.a.createElement(et,c))},nt=function(e){var t=e.disabled,n=e.onPress,r=xe()(e,["disabled","onPress"]);return u.a.createElement(Re.a,{disabled:t,onPress:n},u.a.createElement(Ee.a,r))},rt=function(e){var t=e.navigation,n=e.shown,r=e.dismiss;return u.a.createElement(Ke,{visible:n,onTouchOutside:function(){return r&&r()}},u.a.createElement(je,{style:a.logoutModal.text},"Are you sure you want to logout?"),u.a.createElement(Ne,{style:a.logoutModal.buttonView},u.a.createElement(Ie,{style:a.logoutModal.button,title:"Yes",onPress:function(){y().signOut().then((function(){t.replace("Authentication")})).catch((function(e){}))}}),u.a.createElement(Ie,{style:a.logoutModal.button,title:"No",onPress:function(){return r&&r()}})))},at=function(e){var t=e.navigation,r=e.customToken,o=Object(i.useState)(""),c=l()(o,2),s=c[0],f=c[1],d=Object(i.useState)(""),m=l()(d,2),g=m[0],h=m[1],b=Object(i.useState)(""),p=l()(b,2),v=p[0],E=p[1],O=Object(i.useState)(""),C=l()(O,2),x=C[0],S=C[1],j=Object(i.useState)(!1),P=l()(j,2),k=P[0],T=P[1],D=Object(i.useState)(!1),M=l()(D,2),L=M[0],R=M[1],I=Object(i.useState)(!1),V=l()(I,2),B=V[0],A=V[1],N=Object(i.useState)(!1),z=l()(N,2),U=z[0],W=z[1],F=Object(i.useState)(!0),G=l()(F,2),H=G[0],J=G[1],K=Object(i.useState)(null),q=l()(K,2),Z=q[0],Y=(q[1],Object(i.useContext)(me)),$=Y.theme,X=Y.setTheme,Q=y();Object(i.useEffect)((function(){"Dark"===$&&X("Light")})),Object(i.useEffect)((function(){r?Q.signInWithCustomToken(r).then((function(){t.replace("Main")})).catch((function(e){alert("Invalid custom token specified"),J(!1)})):J(!1)}),[]);var _=function(){Q.signInWithEmailAndPassword(g,v).then((function(){t.replace("Main")})).catch((function(e){alert(e)}))};if(Object(i.useEffect)((function(){R(g.match(/^[a-zA-Z0-9]+@(?:[a-zA-Z0-9]+\.)+[A-Za-z]+$/))}),[g]),H)return u.a.createElement(ze,null);if(Z){var ee=Z.message?Z.message:Z;return u.a.createElement(Ue,{errorMessage:ee})}return u.a.createElement(u.a.Fragment,null,u.a.createElement(Ke,{visible:k,onTouchOutside:function(){T(!1)},style:{justifyContent:"center",alignItems:"center",margin:0}},u.a.createElement(Me,{placeholder:"E-mail",onChangeText:function(e){return h(e)},value:g}),u.a.createElement(Ie,{disabled:U||!L,title:"Reset Password",onPress:function(){L&&(console.log("Send Password reset to: "+g),W(!0),Q.sendPasswordResetEmail(g).then((function(){T(!1),W(!1)})).catch((function(e){alert(e),W(!1)})))},style:{marginTop:5}})),u.a.createElement(Te,null,u.a.createElement(Je,{bounces:!1,style:{flex:1,width:"100%"},keyboardShouldPersistTaps:"always"},u.a.createElement(Ee.a,{style:a.auth.logo,source:n(566)}),B&&u.a.createElement(Me,{placeholder:"Full Name",onChangeText:function(e){return f(e)},value:s}),u.a.createElement(Me,{placeholder:"E-mail",onChangeText:function(e){return h(e)},value:g}),u.a.createElement(Me,{secureTextEntry:!0,placeholder:"Password",onChangeText:function(e){return E(e)},onKeyPress:function(e){"Enter"==e.key&&_()},value:v}),B&&u.a.createElement(Me,{secureTextEntry:!0,placeholder:"Confirm Password",onChangeText:function(e){return S(e)},value:x}),B&&u.a.createElement(u.a.Fragment,null,u.a.createElement(Ie,{title:"Create Account",disabled:U||!L,onPress:function(){v!==x?alert("Passwords don't match."):Q.createUserWithEmailAndPassword(g,v).then((function(){t.replace("Main")})).catch((function(e){alert(e)}))}}),u.a.createElement(Ne,{style:a.auth.footerView},u.a.createElement(je,{fontSize:16},"Already got an account?"),u.a.createElement(Ie,{title:"Log in",onPress:function(){A(!1)}}))),!B&&u.a.createElement(u.a.Fragment,null,u.a.createElement(Ie,{title:"Log in",disabled:U||!L,onPress:_,style:{marginTop:5}}),u.a.createElement(Ne,{style:a.auth.footerView},u.a.createElement(je,{fontSize:16},"Don't have an account?"),u.a.createElement(Ie,{title:"Sign up",onPress:function(){A(!0)}})),u.a.createElement(Ne,{style:a.auth.footerView},u.a.createElement(je,{fontSize:16},"Did you forget your password?"),u.a.createElement(Ie,{title:"Password Reset",onPress:function(){T(!0)}})),"web"===ye.a.OS&&u.a.createElement(u.a.Fragment,null,u.a.createElement(Ne,{style:a.auth.footerView},u.a.createElement(je,{fontSize:16},"Google Sign-In?"),u.a.createElement(Ie,{title:"Google Sign-In",onPress:function(){var e=new w;Q.signInWithRedirect(e).then((function(){t.replace("Main")})).catch((function(e){alert(e)}))}})))))))},ot=function(e){var t=e.navigation;return u.a.createElement(at,{navigation:t})},ct=(n(263),n(1893),n(227)),lt=n(404),it=n.n(lt).a.PhoneNumberUtil.getInstance(),ut=function(e){return"string"===typeof e&&2===e.length};ct.a(ct.b,"phone",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="string"===typeof n&&n?n:ut(e)?"${path} must be a valid phone number for region "+e:"${path} must be a valid phone number.";return this.test("phone",r,(function(n){if(ut(e)||(e="US",t=!1),!n||"string"===typeof n&&0===n.length)return!0;try{var r=it.parseAndKeepRawInput(n,e);if(r&&r.length>0&&!it.isPossibleNumber(r))return!1;var a=it.getRegionCodeForNumber(r);return t?it.isValidNumberForRegion(r,e):it.isValidNumberForRegion(r,a)}catch(o){return!1}}))}));g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.awrap(g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),null,null,null,Promise));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),null,null,[[0,6]],Promise);var st=function(e){var t=e.navigation,n=Object(i.useContext)(k),r=n.currentUser,a=n.claims,o=n.addClaim,c=n.removeClaim,s=Object(i.useState)(),f=l()(s,2),d=f[0],m=f[1],h=Object(i.useState)([]),b=l()(h,2),p=b[0],v=b[1];return Object(i.useEffect)((function(){setTimeout((function(){v([{label:"First",value:1},{label:"Second",value:2},{label:"Third",value:3}])}),1e3)}),[]),Object(i.useEffect)((function(){}),[r]),u.a.createElement(Ae,{navigation:t,title:"Playground"},u.a.createElement(Ne,null,u.a.createElement($e,{data:p,onValueChanged:function(e){console.log(e)}}),u.a.createElement(Me,{onChangeText:function(e){return m(e)},placeHolder:"claim"}),u.a.createElement(Ie,{title:"Add Claim",onPress:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(o(d));case 2:return e.next=4,g.a.awrap(r.reload());case 4:case"end":return e.stop()}}),null,null,null,Promise)}}),u.a.createElement(Ie,{title:"Remove Claim",onPress:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(c(d));case 2:return e.next=4,g.a.awrap(r.reload());case 4:case"end":return e.stop()}}),null,null,null,Promise)}}),u.a.createElement(Ie,{title:"Console Log Claims",onPress:function(){return console.log(a)}}),u.a.createElement(Ie,{title:"Reload Current User",onPress:function(){return g.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.awrap(r.reload());case 2:case"end":return e.stop()}}),null,null,null,Promise)}})))},ft=Object(he.a)(),dt=function(e){e.navigation;var t=x(),n=l()(t,3),r=n[0],a=n[1],o=n[2];return a?u.a.createElement(Ae,{title:"Playground"},u.a.createElement(ze,null)):o?u.a.createElement(Ae,{title:"Playground"},u.a.createElement(Ue,{errorMessage:"Firebase Error: "+firebaseError.message})):u.a.createElement(be.a,{theme:ve.a},u.a.createElement(ft.Navigator,{initialRouteName:r?"Main":"Authentication",headerMode:"none"},u.a.createElement(ft.Screen,{name:"Authentication",component:ot}),u.a.createElement(ft.Screen,{name:"Main",component:st})))},mt=n(1903),gt=n(5),ht=n.n(gt);function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach((function(t){ht()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vt=Object(i.createContext)(),Et=function(e){return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.a.awrap(new Promise((function(t){return setTimeout(t,e)})));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),null,null,null,Promise)},yt=function(e){var t=e.children,n=function(){var e=Object(i.useState)(),t=l()(e,2),n=t[0],r=(t[1],Object(i.useState)(!0)),a=l()(r,2),o=a[0],c=a[1],u=Object(i.useState)(),s=l()(u,2),f=s[0],d=(s[1],Object(i.useState)(!0)),m=l()(d,2),h=m[0],b=m[1],p=Object(i.useState)({}),v=l()(p,2),E=v[0],y=v[1],O=x(),w=l()(O,3),j=w[0],P=w[1],k=w[2],T=Object(i.useState)(!0),D=l()(T,2),M=D[0],L=D[1],R=Object(i.useRef)(!1),I=Object(i.useRef)(null),V=Object(i.useRef)([]),B=function(e){var t,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(e||(t=C(),e=t?t.uid:null),e){r.next=3;break}return r.abrupt("return",!1);case 3:if(!E[e]){r.next=5;break}return r.abrupt("return",!0);case 5:return r.next=7,g.a.awrap(S("profiles").doc(e).get());case 7:return n=r.sent,r.abrupt("return",n.exists);case 9:case"end":return r.stop()}}),null,null,null,Promise)},A=function(e){var t,n,r;return g.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e||(t=C(),e=t?t.uid:null),a.next=3,g.a.awrap(S("profiles").doc(e).get());case 3:if(!(n=a.sent).exists){a.next=7;break}return r=n.data(),a.abrupt("return",r);case 7:return a.abrupt("return",{});case 8:case"end":return a.stop()}}),null,null,null,Promise)},N=function(e){var t,n,r,a=arguments;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=a.length>1&&void 0!==a[1]&&a[1],!(!e||E[e]&&!t||R.current&&I.current===e)){o.next=3;break}return o.abrupt("return");case 3:if(e&&V.current.push(e),!R.current){o.next=6;break}return o.abrupt("return");case 6:n=null;case 7:if(!(V.current.length>0)){o.next=27;break}return n||(n=pt({},E),t||L(!0)),I.current=V.current.shift(),R.current||(R.current=!0),console.log("Starting fetchUser for "+I.current),o.prev=12,o.next=15,g.a.awrap(A(I.current));case 15:r=o.sent,n[I.current]=r,o.next=24;break;case 19:return o.prev=19,o.t0=o.catch(12),o.next=23,g.a.awrap(Et(2e3));case 23:console.log(o.t0);case 24:R.current=!1,o.next=7;break;case 27:n&&y(n),L(!1);case 29:case"end":return o.stop()}}),null,null,[[12,19]],Promise)},z=function(e){return j?(e||(e=j.uid),E[e]&&E[e].displayName?E[e].displayName:(E[e]||N(e),"")):""};return Object(i.useEffect)((function(){c(!1)}),[]),Object(i.useEffect)((function(){z()?b(!1):B().then((function(e){e&&b(!1)})).catch((function(e){console.log(e)}))}),[E]),Object(i.useEffect)((function(){if(n)try{n.docChanges().forEach((function(e){E[e.doc.id]&&N(e.doc.id,!0)}))}catch(e){console.log(e)}}),[n]),{cachedUsers:E,fetchUser:N,isFetching:M||P||h||o,getUserName:z,hasProfile:B,getUserProfile:A,error:k||f}}();return u.a.createElement(vt.Provider,{value:n},t)},Ot=function(e){var t=e.navigation,n=Object(i.useState)(),r=l()(n,2),a=r[0],o=r[1],c=Object(i.useContext)(vt),s=Object(i.useContext)(me).screenOrientation;Object(i.useEffect)((function(){console.log("ScreenOrientation: "+s)}),[s]),Object(i.useEffect)((function(){if(c){var e=c.getUserName();e&&o(e)}}),[c.cachedUsers]);var f=u.a.createElement(ze,null);return c.isFetching||(f=u.a.createElement(je,null,"Welcome ",a)),u.a.createElement(Ae,{navigation:t,title:"Home"},f)},wt=n(9),Ct=n.n(wt),xt=n(10),St=n.n(xt),jt=n(11),Pt=n.n(jt),kt=n(13),Tt=n.n(kt),Dt=n(3),Mt=n.n(Dt);function Lt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt()(e);if(t){var a=Mt()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Tt()(this,n)}}var Rt=function(e){Pt()(n,e);var t=Lt(n);function n(e){var r;return Ct()(this,n),(r=t.call(this,e)).item=e.item,r.date=(r.item.postedAt?r.item.postedAt.toDate():new Date).toLocaleDateString(),r.time=(r.item.postedAt?r.item.postedAt.toDate():new Date).toLocaleTimeString(),r}return St()(n,[{key:"render",value:function(){return u.a.createElement(Ne,{key:this.item.id,style:{paddingVertical:5}},u.a.createElement(je,{fontSize:12,fontWeight:"100"},this.item.authorName+" [ "+this.date+" @ "+this.time+" ] "),u.a.createElement(je,{fontSize:14,fontWeight:"400"},this.item.message))}}]),n}(i.PureComponent),It=function(e){var t=e.navigation,n=Object(i.useContext)(k),r=(n.currentUser,n.claims),o=j("/profiles"),c=l()(o,3),s=c[0],f=c[1],d=c[2],m=Object(i.useState)([]),h=l()(m,2),b=h[0],p=h[1],v=Object(i.useState)(""),E=l()(v,2),y=E[0],O=E[1],w=Object(i.useState)(),C=l()(w,2),x=C[0];C[1];Object(i.useEffect)((function(){if(!f&&!d&&s){var e=[];s.docs.forEach((function(t){(function(t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(t.get("displayName"));case 2:n=r.sent,e.push({label:n,value:t.id});case 4:case"end":return r.stop()}}),null,null,null,Promise)})(t).then((function(){return p(e)}))}))}}),[s]),Object(i.useEffect)((function(){console.log(r)}),[r]);var S=function(){};return u.a.createElement(Ae,{navigation:t,title:"Messenger"},u.a.createElement(Te,null,u.a.createElement(Ne,{style:a.messenger.views},u.a.createElement($e,{data:b,onValueChanged:function(e){console.log(e)}})),u.a.createElement(Ge,{contentContainerStyle:a.messenger.flatList,collectionPath:x,autoScrollToEnd:!0,orderBy:"postedAt",renderItem:function(e){var t=e.item;return u.a.createElement(Rt,{item:t})}}),u.a.createElement(Ne,{style:a.messenger.views},u.a.createElement(Me,{value:y,style:a.messenger.textInput,onChangeText:function(e){return O(e)},onKeyPress:function(e){e.key}}),u.a.createElement(Ie,{title:"Send",style:a.messenger.sendButton,disabled:y.length<1,onPress:S}))))},Vt=function(e){var t=e.navigation,n=Object(i.useContext)(k),r=(n.currentUser,n.claims),o=j("/groups"),c=l()(o,3),s=c[0],f=c[1],d=c[2],m=Object(i.useState)([]),h=l()(m,2),b=h[0],p=h[1],v=Object(i.useState)(""),E=l()(v,2),y=E[0],O=E[1],w=Object(i.useState)(),C=l()(w,2),x=C[0];C[1];Object(i.useEffect)((function(){if(!f&&!d&&s){var e=[];s.docs.forEach((function(t){(function(t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(t.get("name"));case 2:n=r.sent,e.push({label:n,value:t.id});case 4:case"end":return r.stop()}}),null,null,null,Promise)})(t).then((function(){return p(e)}))}))}}),[s]),Object(i.useEffect)((function(){console.log(r)}),[r]);var S=function(){};return u.a.createElement(Ae,{navigation:t,title:"Group Messenger"},u.a.createElement(Te,null,u.a.createElement(Ne,{style:a.messenger.views},u.a.createElement($e,{data:b,onValueChanged:function(e){console.log(e)}})),u.a.createElement(Ge,{contentContainerStyle:a.messenger.flatList,collectionPath:x,autoScrollToEnd:!0,orderBy:"postedAt",renderItem:function(e){var t=e.item;return u.a.createElement(Rt,{item:t})}}),u.a.createElement(Ne,{style:a.messenger.views},u.a.createElement(Me,{value:y,style:a.messenger.textInput,onChangeText:function(e){return O(e)},onKeyPress:function(e){e.key}}),u.a.createElement(Ie,{title:"Send",style:a.messenger.sendButton,disabled:y.length<1,onPress:S}))))},Bt=n(24),At=n.n(Bt),Nt=function(e){var t=e.navigation,n=(xe()(e,["navigation"]),Object(i.useContext)(me).theme,Object(i.useContext)(vt)),r=j("/groups"),o=l()(r,3),c=o[0],s=o[1],f=o[2],d=Object(i.useState)([]),m=l()(d,2),h=m[0],b=m[1],p=Object(i.useState)(""),v=l()(p,2),y=v[0],O=v[1],w=Object(i.useState)(),C=l()(w,2),x=C[0],S=C[1],P=Object(i.useState)([]),k=l()(P,2),T=k[0],D=k[1],M=Object(i.useState)(""),L=l()(M,2),R=L[0],I=L[1],V=Object(i.useState)(),B=l()(V,2),A=B[0],N=B[1],z=Object(i.useState)(!1),U=l()(z,2),W=U[0],F=U[1],G=Object(i.useState)(!1),H=l()(G,2),J=H[0],K=H[1],q=Object(i.useState)(!1),Z=l()(q,2),Y=Z[0],$=Z[1],X=Object(i.useState)(!1),Q=l()(X,2),_=Q[0],ee=Q[1],te=Object(i.useState)(!1),ne=l()(te,2),re=ne[0],ae=ne[1];Object(i.useEffect)((function(){if(!s&&!f&&c){var e=[];c.docs.forEach((function(t){(function(t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(t.get("name"));case 2:n=r.sent,e.push({label:n,value:t.id});case 4:case"end":return r.stop()}}),null,null,null,Promise)})(t).then((function(){b(e),S(e[0])}))}))}}),[c]),Object(i.useEffect)((function(){x||S(h[0])}),[h]),Object(i.useEffect)((function(){x&&function(){var e,t,r,a,o;g.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(x&&x.value){c.next=2;break}return c.abrupt("return");case 2:return c.next=4,g.a.awrap(E().collection("groups").doc(x.value).get());case 4:e=c.sent,t=e.data(),r=[],a=[],t&&t.members&&(o=function(e){var t;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(n.getUserProfile(e));case 2:t=r.sent,a.push({label:t.displayName,value:e});case 4:case"end":return r.stop()}}),null,null,null,Promise)},t.members.forEach((function(e){r.push(o(e))}))),Promise.all(r).then((function(){D(a),N(a.length>0?a[0]:"")}));case 10:case"end":return c.stop()}}),null,null,null,Promise)}()}),[x]),Object(i.useEffect)((function(){A&&console.log(A)}),[A]);var oe=u.a.createElement(ze,null);if(f){var ce=f?f.code:null;oe=u.a.createElement(Ue,{permissionDenied:"permission-denied"===ce})}else s||(oe=u.a.createElement(u.a.Fragment,null,u.a.createElement(Ke,{visible:re,onTouchOutside:function(){return $(!1)}},u.a.createElement(je,{style:a.logoutModal.text},"Are you sure you want to remove the '",A&&A.label,"' from the '",x&&x.label,"' group?"),u.a.createElement(Ne,{style:a.logoutModal.buttonView},u.a.createElement(Ie,{style:a.logoutModal.button,title:"Yes",onPress:function(){return ae(!1)||function(){var e=T.filter((function(e){return e.value!=A.value}));console.log(e),E().collection("groups").doc(x.value).set({name:x.label,members:e}).then((function(){D(e)})).catch((function(e){"permission-denied"===e.code&&alert("Permission Denied")}))}()}}),u.a.createElement(Ie,{style:a.logoutModal.button,title:"No",onPress:function(){return ae(!1)}}))),u.a.createElement(Ke,{visible:_,onTouchOutside:function(){return ee(!1)}},u.a.createElement(Me,{style:a.logoutModal.text,placeholder:"Member's UID",onChangeText:function(e){return I(e)}}),u.a.createElement(Ne,{style:a.logoutModal.buttonView},u.a.createElement(Ie,{style:a.logoutModal.button,title:"Add Member",onPress:function(){return ee(!1)||function(){var e=[].concat(At()(T),[R]);console.log(e),E().collection("groups").doc(x.value).set({name:x.label,members:e}).then((function(){D(e)})).catch((function(e){"permission-denied"===e.code&&alert("Permission Denied")}))}()}}),u.a.createElement(Ie,{style:a.logoutModal.button,title:"Cancel",onPress:function(){return ee(!1)||I("")}}))),u.a.createElement(Ke,{visible:Y,onTouchOutside:function(){return $(!1)}},u.a.createElement(je,{style:a.logoutModal.text},"Are you sure you want to remove the '",x&&x.label,"' group?"),u.a.createElement(Ne,{style:a.logoutModal.buttonView},u.a.createElement(Ie,{style:a.logoutModal.button,title:"Yes",onPress:function(){return $(!1)||void E().collection("/groups").doc(x.value).delete().catch((function(e){"permission-denied"===e.code&&alert("Permission Denied")}))}}),u.a.createElement(Ie,{style:a.logoutModal.button,title:"No",onPress:function(){return $(!1)}}))),u.a.createElement(Ke,{visible:W,onTouchOutside:function(){return F(!1)}},u.a.createElement(Me,{style:a.logoutModal.text,placeholder:"Group Name",onChangeText:function(e){return O(e)}}),u.a.createElement(Ne,{style:a.logoutModal.buttonView},u.a.createElement(Ie,{style:a.logoutModal.button,title:"Add Group",onPress:function(){return F(!1)||void E().collection("/groups").add({name:y}).then((function(){return O("")})).catch((function(e){"permission-denied"===e.code&&alert("Permission Denied")}))}}),u.a.createElement(Ie,{style:a.logoutModal.button,title:"Cancel",onPress:function(){return F(!1)||O("")}}))),u.a.createElement(Ke,{visible:J,onTouchOutside:function(){return K(!1)}},u.a.createElement(Me,{style:a.logoutModal.text,placeholder:"Group Name",defaultValue:x&&x.label,onChangeText:function(e){return O(e)}}),u.a.createElement(Ne,{style:a.logoutModal.buttonView},u.a.createElement(Ie,{style:a.logoutModal.button,title:"Rename Group",onPress:function(){return K(!1)||void E().collection("/groups").doc(x.value).update({name:y}).then((function(){O(""),x.label=y})).catch((function(e){"permission-denied"===e.code&&alert("Permission Denied")}))}}),u.a.createElement(Ie,{style:a.logoutModal.button,title:"Cancel",onPress:function(){return K(!1)||O("")}}))),u.a.createElement(Ne,null,u.a.createElement(je,null,"Groups"),u.a.createElement($e,{data:h,onValueChanged:function(e){return S(e)}}),u.a.createElement(Ne,{style:[a.views.flexRowJustifyCenter]},u.a.createElement(Ie,{title:"Add",onPress:function(){return F(!0)}}),u.a.createElement(Ie,{title:"Rename",disabled:!x,onPress:function(){return O(x&&x.label)||K(!0)}}),u.a.createElement(Ie,{title:"Remove",disabled:!x,onPress:function(){return $(!0)}})),u.a.createElement(je,null,"Members"),u.a.createElement($e,{data:T,onValueChanged:function(e){return N(e)}}),u.a.createElement(Ne,{style:a.views.flexRowJustifyCenter},u.a.createElement(Ie,{title:"Add",onPress:function(){return ee(!0)}}),u.a.createElement(Ie,{title:"Remove",disabled:!A,onPress:function(){return ae(!0)}})))));return u.a.createElement(Ae,{navigation:t,title:"Manage Groups"},u.a.createElement(Te,null,oe))},zt=function(e){var t=e.navigation,n=(xe()(e,["navigation"]),Object(i.useContext)(me).theme,Object(i.useContext)(k)),r=(n.currentUser,n.claims),o=n.addClaim,c=n.removeClaim,s=n.getClaims,f=j("profiles"),d=l()(f,3),m=d[0],h=d[1],b=d[2],p=Object(i.useState)([]),v=l()(p,2),E=v[0],y=v[1],O=Object(i.useState)(),w=l()(O,2),C=w[0],x=w[1],S=Object(i.useState)(!1),P=l()(S,2),T=P[0],D=P[1],M=Object(i.useState)(),L=l()(M,2),R=L[0],I=L[1],V=Object(i.useState)(),B=l()(V,2),A=B[0],N=B[1],z=Object(i.useState)(),U=l()(z,2),W=U[0],F=U[1],G=Object(i.useState)(!0),H=l()(G,2),J=H[0],K=H[1],q=function(e,t,n){(n?o(e,t):c(e,t)).then((function(e){console.log(e)}))};Object(i.useEffect)((function(){K(!r.admin)}),[]),Object(i.useEffect)((function(){if(!h&&!b&&m){var e=[];m.docs.forEach((function(t){(function(t){var n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.a.awrap(t.get("displayName"));case 2:n=r.sent,e.push({label:n,value:t.id});case 4:case"end":return r.stop()}}),null,null,null,Promise)})(t).then((function(){return y(e)}))}))}}),[m]),Object(i.useEffect)((function(){C||x(E[0])}),[E]),Object(i.useEffect)((function(){if(!C)return I(!1),N(!1),void F(!1);D(!0),s(C.value).then((function(e){I(e&&!!e.admin),N(e&&!!e.manager),F(e&&!!e.moderator),D(!1)}))}),[C]);var Z=u.a.createElement(ze,null);if(b||J){var Y=b?b.code:null;Z=u.a.createElement(Ue,{permissionDenied:"permission-denied"===Y||J})}else h||(Z=u.a.createElement(u.a.Fragment,null,u.a.createElement(Ne,null,u.a.createElement($e,{data:E,onValueChanged:function(e){x(e)}})),u.a.createElement(Ne,{style:a.views.flexRowJustifyCenter},u.a.createElement(tt,{style:{marginRight:15},isLoading:T,label:"Admin",value:!!R,onChange:function(){return I((function(e){return q(C.value,"admin",!e)||!e}))}}),u.a.createElement(tt,{style:{marginRight:15},isLoading:T,label:"Manager",value:!!A,onChange:function(){return N((function(e){return q(C.value,"manager",!e)||!e}))}}),u.a.createElement(tt,{isLoading:T,label:"Moderator",value:!!W,onChange:function(){return F((function(e){return q(C.value,"moderator",!e)||!e}))}}))));return u.a.createElement(Ae,{navigation:t,title:"Manage User Roles"},u.a.createElement(Te,null,Z))};function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){ht()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t){switch(t.type){case"setView":var n=Wt({},e);return n.viewLength=t.length?t.length:n.viewLength,n.viewFirst=t.first?t.first:n.viewFirst,n.viewLast=t.last?t.last:n.viewLast,n;case"incrementViewLength":var r=Wt({},e);return r.viewLength=r.viewLength+(t.amount?t.amount:1),console.log("incrementViewLength: new length = "+r.viewLength),r;default:return e}}var Gt=function(e){var t,n,r=e.navigation,o=Object(i.useContext)(k),c=o.currentUser,s=o.claims,f=Object(i.useState)(""),d=l()(f,2),m=d[0],g=d[1],h=(t=c.uid,n=25,Object(i.useReducer)(Ft,{messengerContainerId:t,messageCollectionPath:"/members/"+t+"/messages/",messengerDocumentPath:"/members/"+t,viewLength:n})),b=l()(h,2),p=b[0];b[1];Object(i.useEffect)((function(){console.log(s)}),[s]);var v=function(){var e=m;g(""),function(e){return P("addMessage",{message:e})}(e).then((function(e){var t=e.data;if("string"===typeof t.type){if(console.log("Error: "+t.message),"silent"===t.type)return;alert(t.message)}else console.log(t)})).catch((function(e){alert("Unhandled exception")}))};return u.a.createElement(Ae,{navigation:r,title:"Wall"},u.a.createElement(Te,null,u.a.createElement(Ge,{contentContainerStyle:a.messenger.flatList,collectionPath:p.messageCollectionPath,autoScrollToEnd:!0,orderBy:"postedAt",renderItem:function(e){var t=e.item;return u.a.createElement(Rt,{item:t})}}),u.a.createElement(Ne,{style:a.messenger.views},u.a.createElement(Me,{value:m,style:a.messenger.textInput,onChangeText:function(e){return g(e)},onKeyPress:function(e){"Enter"==e.key&&v()}}),u.a.createElement(Ie,{title:"Send",style:a.messenger.sendButton,disabled:m.length<1,onPress:v}))))},Ht=Object(mt.a)(),Jt=function(){return u.a.createElement(yt,null,u.a.createElement(Ht.Navigator,null,u.a.createElement(Ht.Screen,{name:"Home",component:Ot}),u.a.createElement(Ht.Screen,{name:"Wall",component:Gt}),u.a.createElement(Ht.Screen,{name:"Messenger",component:It}),u.a.createElement(Ht.Screen,{name:"Group Messenger",component:Vt}),u.a.createElement(Ht.Screen,{name:"Manage Groups",component:Nt}),u.a.createElement(Ht.Screen,{name:"Manage User Roles",component:zt}),u.a.createElement(Ht.Screen,{name:"Playground",component:st})))},Kt=Object(he.a)(),qt=function(){var e=x(),t=l()(e,3),n=t[0],r=t[1],a=t[2],o=Object(i.useContext)(me).theme;return r?u.a.createElement(ze,null):a?u.a.createElement(Ue,{errorMessage:"Firebase Error: "+a.message}):u.a.createElement(be.a,{theme:"Dark"===o?pe.a:ve.a},u.a.createElement(Kt.Navigator,{headerMode:"none",initialRouteName:n?"Main":"Authentication",navigationOptions:function(e){e.navigation;return{headerLeft:null}}},u.a.createElement(Kt.Screen,{name:"Authentication",component:ot}),u.a.createElement(Kt.Screen,{name:"Main",component:Jt})))},Zt=function(){return d.b({"serif-pro-black":n(1887),"serif-pro-bold":n(1888)})};function Yt(){var e=Object(i.useState)(!1),t=l()(e,2),n=t[0],r=t[1];return n?u.a.createElement(ge,null,u.a.createElement(T,null,o.playgroundMode?u.a.createElement(dt,null):u.a.createElement(qt,null),u.a.createElement(s.ModalPortal,null))):u.a.createElement(f.a,{startAsync:Zt,onFinish:function(){return r(!0)}})}},419:function(e,t,n){e.exports=n(1894)},566:function(e,t,n){e.exports=n.p+"static/media/icon.ad415ea7.png"}},[[419,1,2]]]);
//# sourceMappingURL=app.eb952e66.chunk.js.map